<!DOCTYPE html>
<html lang="en">
<head>
    <title>Taleb Zhang - Music Player</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="./styles.css">
    <style>
        /* General styles */
        body {
            background-color: #181818; /* Dark background */
            color: #ffffff; /* Light text */
            font-family: Arial, sans-serif;
        }
        .contentxt { text-align: center; margin: auto; }
        .authorpage { text-decoration: none; color: #1DB954; }
        .headname { font-size: 2em; margin: 20px 0; }
        .button { background-color: #1DB954; color: white; border: none; padding: 10px 15px; cursor: pointer; border-radius: 20px; }
        .button:hover { background-color: #1AAE4D; }
        .playlist { 
            display: none; 
            position: absolute; 
            background-color: #282828; 
            border-radius: 5px; 
            padding: 10px; 
            width: 200px; 
            left: 50%; 
            transform: translateX(-50%); 
            z-index: 1000; 
            max-height: 200px; 
            overflow-y: auto; 
        }
        .playlist li { 
            list-style: none; 
            padding: 8px; 
            cursor: pointer; 
        }
        .playlist li:hover { background-color: #3A3A3A; }
        .current-song { font-weight: bold; }
        .fa-playlist { cursor: pointer; margin-top: 10px; }
    </style>
</head>

<body >

<br><br><br><br>

<section class="contentxt">
    <h3 class="songtitle">音乐地带</h3>
    <button class="button" id="loopBtn" onclick="toggleLoop()">单曲循环</button>
    <button class="button" onclick="previousSong()">上一曲</button>
    <button class="button" onclick="nextSong()">下一曲</button>
    <i class="fa fa-list fa-playlist" onclick="togglePlaylist()" style="font-size: 34px; color: #1DB954;"></i>
    <ul class="playlist" id="playlist">
        <!-- Playlist items will be dynamically inserted here -->
    </ul>
    <p id="currentSongInfo"></p>
    <audio id="audioPlayer" controls></audio>
    
    <br>
    <button class="button" id="playBtn" onclick="startPlaylist()">开始播放</button>
    
   
    <br>
    <div id="yequmar" class="txtsong">
        <span class="yequ1"></span><br><br>
    </div>
    <br>
    
    
    
    
</section>


<script>
    const playlist = [
        { title: '可能', artist: '程响', src: 'music/cxkn.mp3' },
        { title: '凡人诀', artist: '王梓赫Ray', src: 'music/frj.mp3' },
        //{ title: '姑娘别哭泣', artist: '柯柯柯啊', src: 'music/nhbkq.mp3' },
        { title: '平生不晚', artist: '难却', src: 'music/psbwnq.mp3' },
        { title: '青花', artist: '周传雄', src: 'music/qyqh.mp3' },
        { title: '落', artist: '唐伯虎Annie', src: 'music/rsmw.mp3' },
        //{ title: '重生之我在异乡为异客', artist: '王睿卓', src: 'music/wlz.mp3' },
        //{ title: '我记得', artist: '赵雷', src: 'music/zlwjd.mp3' },
        //{ title: '站着等你三千年', artist: '海来阿木', src: 'music/zzdnsqn.mp3' },
        { title: '别知己', artist: '海来阿木', src: 'music/bzji.mp3' },
        { title: '断桥残雪', artist: '许嵩', src: 'music/dqcx.mp3' },
        //{ title: '电音', artist: '', src: 'music/dydy.mp3' },
        { title: 'Jar of Love', artist: '曲婉婷', src: 'music/jolo.mp3' },
        { title: '你的万水千山', artist: '海来阿木', src: 'music/ndwsqs.mp3' },
        { title: '问得太逼真', artist: '张敬轩', src: 'music/wdtbz.mp3' },
        { title: '粤语歌曲', artist: '女声', src: 'music/wfxlc.mp3' },
        { title: '往后余生', artist: '王贰浪', src: 'music/whys.mp3' },
        { title: '一曲相思', artist: '阿悠悠', src: 'music/yqxs.mp3' },
        { title: '一笑江湖', artist: '科目三', src: 'music/yxjh.mp3' },
        { title: '左手指月', artist: '萨顶顶', src: 'music/zszy.mp3' },
        { title: '记事本', artist: '周传雄', src: 'music/jsbe.mp3' },
        { title: '蓝色土耳其', artist: '周传雄', src: 'music/lstrq.mp3' },
        { title: '男人海洋', artist: '周传雄', src: 'music/nrhy.mp3' },
        { title: '我的心太乱', artist: '周传雄', src: 'music/wdxtr.mp3' },
        { title: '冬天的秘密', artist: '周传雄', src: 'music/dtdmm.mp3' },
        { title: '青花', artist: '周传雄', src: 'music/qhua.mp3' },
        { title: '我难过', artist: '周传雄', src: 'music/wng.mp3' },
        { title: '关不上的窗', artist: '周传雄', src: 'music/gbsdc.mp3' },
        { title: '寂寞沙洲冷', artist: '周传雄', src: 'music/jmszr.mp3' },
        { title: '黄昏', artist: '周传雄', src: 'music/hhun.mp3' },
        { title: '你看时间等过谁', artist: '张宇', src: 'music/nksjdgs.mp3' },
        { title: '余香', artist: '张小九', src: 'music/yuxiang.mp3' },
        { title: '暗涌, artist: '王菲', src: 'music/anyong.mp3' }
        // Add more songs here
    ];

    let currentSongIndex = 0;
    const audioPlayer = document.getElementById('audioPlayer');
    let isLoopEnabled = false;

    function loadSong(index) {
        if (index >= 0 && index < playlist.length) {
            console.log(`Loading song: ${playlist[index].title}`);
            audioPlayer.src = playlist[index].src;
            audioPlayer.load();
            audioPlayer.play().then(() => {
                console.log(`Playing song: ${playlist[index].title}`);
                updateCurrentSongInfo(index);
            }).catch(error => {
                console.error("Error playing the song:", error);
            });
        }
    }

    audioPlayer.addEventListener('ended', () => {
        if (isLoopEnabled) {
            loadSong(currentSongIndex);
        } else {
            nextSong();
        }
    });

    function startPlaylist() {
        loadSong(currentSongIndex);
        document.getElementById('playBtn').style.display = 'none';
    }

    function toggleLoop() {
        isLoopEnabled = !isLoopEnabled;
        document.getElementById('loopBtn').textContent = isLoopEnabled ? 'Disable Loop' : 'Enable Loop';
    }

    function nextSong() {
        currentSongIndex++;
        if (currentSongIndex < playlist.length) {
            loadSong(currentSongIndex);
        } else {
            currentSongIndex = 0;
            loadSong(currentSongIndex);
        }
    }

    function previousSong() {
        currentSongIndex--;
        if (currentSongIndex < 0) {
            currentSongIndex = playlist.length - 1;
        }
        loadSong(currentSongIndex);
    }

    function updateCurrentSongInfo(index) {
        const currentSongInfo = document.getElementById('currentSongInfo');
        currentSongInfo.innerText = `${playlist[index].title} - ${playlist[index].artist}`;
        highlightCurrentSong(index);
    }

    function highlightCurrentSong(index) {
        const playlistItems = document.querySelectorAll('.playlist li');
        playlistItems.forEach((item, idx) => {
            if (idx === index) {
                item.classList.add('current-song');
            } else {
                item.classList.remove('current-song');
            }
        });
    }

    function populatePlaylist() {
        const playlistElement = document.getElementById('playlist');
        playlist.forEach((song, index) => {
            const li = document.createElement('li');
            li.innerText = `${song.title} - ${song.artist}`;
            li.onclick = () => {
                currentSongIndex = index;
                loadSong(currentSongIndex);
            };
            playlistElement.appendChild(li);
        });
    }

    // Show/hide the playlist
    function togglePlaylist() {
        const playlistElement = document.getElementById('playlist');
        playlistElement.style.display = playlistElement.style.display === 'none' || playlistElement.style.display === '' ? 'block' : 'none';
    }

    populatePlaylist();
</script>
</body>
</html>
