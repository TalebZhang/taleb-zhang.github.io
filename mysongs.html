<!DOCTYPE html>
<html lang="en">
<head>
	<title>Taleb Zhang</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	<link rel="stylesheet" href="./styles.css">
<style>
    /* Example CSS styling */
    .contentxt { text-align: center; margin: 20px; }
    .authorpage { text-decoration: none; color: black; }
    .txtbody { font-family: Arial, sans-serif; }
    .headname { font-size: 2em; }
    .txtsong { margin-top: 20px; }
    .topic { margin-right: 10px; }
    .fa { margin-top: 20px; cursor: pointer; }
  </style></head>

<body class="txtbody">
  <header>
    <h1 class="headname"><a href="index.html" class="authorpage">Taleb Zhang</a></h1>
    <hr>
  </header>
  <br><br><br><br>

  <section class="contentxt">
    <h3 class="songtitle">音乐地带</h3>
   <button id="loopBtn" onclick="toggleLoop()" type="button">单曲循环</button>
    <button onclick="previousSong()" type="button">上一曲</button>
    <button onclick="nextSong()" type="button">下一曲</button>    <br> 
    <audio id="audioPlayer" controls></audio>
    <br>
    <!-- Play button to start playlist -->
    <button id="playBtn" onclick="startPlaylist()">开始播放</button>
    
    <div class="author">
      <ul>
        <li><a href="index.html" class="authorpage">Taleb Zhang</a></li>
      </ul>
    </div>
    <br>
    <div id="yequmar" class="txtsong">
      <span class="yequ1"></span><br><br>
    </div>
    <br>
    <div>
      <a class="topic">Beautiful Music</a>
      <a class="topic"></a>
      <a class="topic">乐行音乐</a><br>
    </div><br>
    
    <i class="fa fa-share-square-o" style="font-size:20px;color:#242424;float:right;"></i><br>
  </section>
  <hr>
  <div class="contentxt">
    <a href="about.html" class="tention">About</a>
    <a class="tention">Privacy</a>
    <a href="index.html" class="tention">Home</a><br>
  </div>
  
  <script>
    // List of songs (ensure file paths are correct)
    const playlist = [
      'music/cxkn.mp3',
      'music/frj.mp3',
      'music/nhbkq.mp3',
      'music/psbwnq.mp3',
      'music/qyqh.mp3',
      'music/rsmw.mp3',
      'music/wlz.mp3',
      'music/wzys.mp3',
      'music/yequ.mp3',
      'music/zlwjd.mp3',
      'music/zzdnsqn.mp3'
    ];

    let currentSongIndex = 0;
    const audioPlayer = document.getElementById('audioPlayer');
let isLoopEnabled = false;
    // Load and play a song from the playlist
    function loadSong(index) {
      if (index >= 0 && index < playlist.length) {
        console.log(`Loading song: ${playlist[index]}`);
        audioPlayer.src = playlist[index];
        audioPlayer.load(); // Explicitly load the file
        audioPlayer.play().then(() => {
          console.log(`Playing song: ${playlist[index]}`);
        }).catch(error => {
          console.error("Error playing the song:", error);
        });      } else {
        console.error("Invalid song index");
      }
    }

    // Event listener for when the song ends
    audioPlayer.addEventListener('ended', () => {
     if (isLoopEnabled) {
        // Loop the current song if enabled
        loadSong(currentSongIndex);
      } else {
        // Move to the next song
        nextSong();
      }    });

    // Function to start the playlist (triggered by button click)
    function startPlaylist() {
      loadSong(currentSongIndex);
      document.getElementById('playBtn').style.display = 'none'; // Hide the button after starting
    }

    // Function to enable/disable loop
    function toggleLoop() {
      isLoopEnabled = !isLoopEnabled;
      document.getElementById('loopBtn').textContent = isLoopEnabled ? 'Disable Loop' : 'Enable Loop';
      console.log(isLoopEnabled ? "Loop enabled" : "Loop disabled");
    }

    // Load the next song in the playlist
    function nextSong() {
      currentSongIndex++;
      if (currentSongIndex < playlist.length) {
        loadSong(currentSongIndex);
      } else {
        currentSongIndex = 0; // Reset to first song
        loadSong(currentSongIndex);
      }
    }

    // Load the previous song in the playlist
    function previousSong() {
      currentSongIndex--;
      if (currentSongIndex < 0) {
        currentSongIndex = playlist.length - 1; // Wrap around to the last song
      }
      loadSong(currentSongIndex);
    }  </script>
</body></blog>
</html>
